<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="663px" height="497px" viewBox="-0.5 -0.5 663 497" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2020-08-24T01:19:34.191Z&quot; agent=&quot;5.0 (X11; Fedora; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36&quot; etag=&quot;Ia9Zf_sZDaxF3-HTXZGr&quot; version=&quot;13.6.4&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;kgpKYQtTHZ0yAKxKKP6v&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 425 357 L 263.12 357" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 256.12 357 L 263.12 353.5 L 263.12 360.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="284" y="316" width="113" height="40" stroke-width="0"/><text x="339.5" y="325.5">Lock tBTC</text><text x="339.5" y="338.5">(spendable by User</text><text x="339.5" y="351.5">if K is revealed in time)</text></g><rect x="20" y="56" width="100" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 70 96 L 70 496" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="69.5" y="80.5">User</text></g><rect x="65" y="126" width="10" height="313" fill="#ffffff" stroke="#000000" pointer-events="all"/><rect x="200" y="56" width="100" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 250 96 L 250 496" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="249.5" y="80.5">Smart contract</text></g><rect x="245" y="136" width="10" height="20" fill="#ffffff" stroke="#000000" pointer-events="all"/><rect x="245" y="357" width="10" height="19" fill="#ffffff" stroke="#000000" pointer-events="all"/><rect x="245" y="400" width="10" height="39" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 75 136 L 236.88 136" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 243.88 136 L 236.88 139.5 L 236.88 132.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="111" y="108" width="99" height="27" stroke-width="0"/><text x="159.5" y="117.5">Get available nodes</text><text x="159.5" y="130.5"> and their fees</text></g><path d="M 249 156 L 77.62 156" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 70.62 156 L 77.62 152.5 L 77.62 159.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="380" y="55.5" width="100" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 430 95.5 L 430 496" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="429.5" y="80">Node</text></g><rect x="425" y="235.5" width="10" height="240" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 424.75 453.02 L 400 453 L 400 475 L 421.63 475.21" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 426.88 475.26 L 419.85 478.69 L 421.63 475.21 L 419.92 471.69 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-end; width: 1px; height: 1px; padding-top: 466px; margin-left: 397px;"><div style="box-sizing: border-box; font-size: 0; text-align: right; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">Claim invoice </div></div></div></foreignObject><text x="397" y="469" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="end">Claim invoice </text></switch></g><rect x="0" y="6" width="660" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 658px; height: 1px; padding-top: 16px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 28px">Lightning network -&gt; tBTC</font></div></div></div></foreignObject><text x="330" y="20" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Lightning network -&gt; tBTC</text></switch></g><path d="M 252 235 L 416.88 235.48" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 423.88 235.5 L 416.87 238.98 L 416.89 231.98 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 425 272 L 83.12 273.03" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 76.12 273.05 L 83.11 269.53 L 83.13 276.53 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="135" y="257" width="231" height="14" stroke-width="0"/><text x="249.5" y="267.02">Provide lightning invoice with hash(K) as HTLC</text></g><path d="M 75 171 L 95 171 L 95 191 L 83.12 191" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 76.12 191 L 83.12 187.5 L 83.12 194.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 181px; margin-left: 99px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "> Generate secret K</div></div></div></foreignObject><text x="99" y="184" fill="#000000" font-family="Helvetica" font-size="11px"> Generate secret K</text></switch></g><path d="M 75 216 L 236.88 216" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 243.88 216 L 236.88 219.5 L 236.88 212.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="85" y="201" width="152" height="14" stroke-width="0"/><text x="159.5" y="210.5">Lock ETH and provide hash(K)</text></g><rect x="245" y="216" width="10" height="20" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 74.67 305.66 L 416.88 305.66" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 423.88 305.66 L 416.88 309.16 L 416.88 302.16 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="145" y="290" width="211" height="14" stroke-width="0"/><text x="249.17" y="300.16">Check that invoice uses hash(K) and pay it</text></g><path d="M 74.67 399 L 236.88 399.65" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 243.88 399.68 L 236.87 403.15 L 236.9 396.15 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="137" y="384" width="47" height="14" stroke-width="0"/><text x="159.17" y="393.84">Reveal K</text></g><path d="M 248.89 439.03 L 78.54 439" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 71.54 439 L 78.54 435.5 L 78.54 442.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="99" y="411" width="123" height="27" stroke-width="0"/><text x="159.39" y="420.51">Transfer tBTC</text><text x="159.39" y="433.51">&amp; refund security deposit</text></g><path d="M 255 439 L 417.21 439.65" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 424.21 439.68 L 417.2 443.15 L 417.23 436.15 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="325" y="424" width="30" height="14" stroke-width="0"/><text x="339.5" y="433.84">Get K</text></g><path d="M 245 376 L 83.12 376" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 76.12 376 L 83.12 372.5 L 83.12 379.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 660 217 L 252.5 216.84" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="stroke"/><rect x="465" y="256" width="170" height="70" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 291px; margin-left: 466px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">If this part takes over 1 hour (node is unresponsive) User can get their security deposit directly refunded</div></div></div></foreignObject><text x="550" y="295" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">If this part takes over 1 ho...</text></switch></g><path d="M 660 357 L 420 357" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 660 399 L 248.14 399.38" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><rect x="450" y="361" width="200" height="35" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 379px; margin-left: 451px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">If K is not revealed within X minutes Node takes the security deposit</div></div></div></foreignObject><text x="550" y="382" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">If K is not revealed within X min...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>